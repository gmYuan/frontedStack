## 性能优化

Q1 如何减少webpack的构建体积

A: <br/>

1 压缩图片

1.1 方法1: 基于 Node 库的 imagemin 或者 tinypng API

1.2 Imagemin的优点分析
  - 有很多定制选项
  - 可以引入更多第三方 优化插件，例如pngquant
  - 可以处理 多种图片格式


2 方法2: 配置 image-webpack-loader

```js

return {
  test: /\.(pnglsvgljpglgif|blob)$/，
  use:[{
    loader:'file-loader',
    options:{
      name:`${filename}img/[name]${hash}.[ext]`
    }
  },
  {
    loader:"image-webpack-loader",
    options: {
      mozjpeg:{
        progressive: true,
        quality: 65
      },
      optipng:{
        enabled: false,
      },
      pngquant:{
        quality:'65-90',
        speed:4
      },
      gifsicle: {
        interlaced: false,
      },
      webp:{
        quality: 75
      }
    }
  }]
}
```


3 Imagemin的压缩原理
  - pngquant: 是一款PNG压缩器，通过将图像转换为具有alpha通道（通常比24/32位PNG
    文件小60-80％）的更高效的8位PNG格式，可显著减小文件大小
  
  - tinypng: 也是将24位png文件转化为更小有索引的8位图片，同时所有非必要的metadata 也会被剥离掉

  - pngcrush: 其主要目的是 通过尝试不同的压缩级别 和 PNG过滤方法, 来降低PNG IDAT数据流的大小

  - optipng: 其设计灵感来自于pngcrush,optipng可将图像文件重新压缩为更小尺寸，而不会丢失任何信息














## 参考文档

[01-珠峰-webpack常见面试题1](http://www.zhufengpeixun.com/strong/html/109.1.webpack_usage.html)

[02-珠峰-webpack基础含义与常用配置1](http://www.zhufengpeixun.com/strong/html/26.webpack-1-basic.html)

[03-珠峰-webpack常用plugin配置](http://www.zhufengpeixun.com/strong/html/26.webpack-2-optimize.html)

[04-珠峰-webpack性能优化 + 常用plugin配置方法1](http://www.zhufengpeixun.com/strong/html/103.8.webpack-optimize1.html)

