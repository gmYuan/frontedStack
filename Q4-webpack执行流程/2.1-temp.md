


webpakc执行流程

## 一 总体调用栈部分

```js
// 命令行--> webpack-cli/bin/cli.js 下
1. 命令行执行 webpack/ npm run build -->
  2.1 const webpack = require('webpack')
  2.2 const compiler = webpack(config) -->
    // 3 node_modules/webpack/lib/webpack.js
  2.3 compiler.run();


// webpack/lib/webpack.js内
2.2 webpack() -->
  3.1 compiler = new Compiler(): 创建 compiler实例
  3.2 options.plugin.apply(): 注册 用户选项配置插件，注册事件钩子
  3.3 new WebpackOptionsApply().process(): 注册 webpack内置插件 -->
    
    4.1 new EntryOptionPlugin().apply(): 
      - 注册了 entryOption事件钩子，其handler为 itemToPlugin
      
    4.2 compiler.hooks.entryOption.call(): 立即触发了 entryOption事件




2.3 compiler.run()-->
  x.1 











    4.1 new Compiler()
    4.2 applyWebpackOptionsDefaults();
    4.3 new WebpackOptionsApply().process() -->
      5.1 new EntryOptionPlugin().apply(): 注册了entryOption 钩子
      5.2 compiler.hooks.entryOption.call(): 立即触发entryOption 钩子
        6.1 new EntryPlugin().apply(): 监听2个钩子

      5.3 new FlagDependencyExportsPlugin().apply()
      5.4 new FlagDependencyUsagePlugin().apply()
      5.5 ... 更多内置插件


2.3 compiler.run() -->
  7.1 触发一些 compiler钩子
    8.1 compiler.compile() -->
      9.1 compilation = compiler.newCompilation()

      9.2 hooks.make.callAsync() -->
        10.1 hooks.finishMake.callAsync()
        10.2 compilation.finish()
        10.3 compilation.seal() -->
        10.4 hooks.afterCompile.callAsync()


9.1 compiler.newCompilation()



```









