
## webpack原理


Q1 webpack的执行流程大致是什么

A:

1 运行起 webpack
  - 通过 npm scripts 运行 webpack: `npm run dev/build`
  - 通过 webpack 直接运行: `webpack entry.js bundle.js`


2 查找 webpack 入口文件
  - 在命令行运行以上命令后，npm 会让命令行工具进入 node_modules/bin 目录，查找是否存在webpack.sh
  - 如果存在，就执行，不存在，就抛出错误==> 其实际执行文件是 `node_modules/webpack/bin/webpack.js`


3 webpack/bin/webpack.js的 大致流程
  - 根据已安装的脚手架数量， 分别进行 逻辑处理
  - 其结果是 webpack 找到 webpack-cli/webpack-command 包，并执行 CLI

```js
// webpack/bin/webpack.js

//1. 正常执行返回
process.exitCode = 0;

//2. 运行 某个Cli命令
const runCommand = (command, args) =>{...};

//3. 判断某个包是否安装
const isInstalled = packageName =>{...};

//4. webpack 可用的 CLI: webpack-cli 和 webpack-command
const CLIs =[...];

//5. 判断是否两个 ClI 是否安装了
const installedClis = CLIs.filter(cli => cli.installed);

//6. 根据已安装的脚手架数量， 分别进行 逻辑处理
if (installedClis.length === 0){...}
else if (installedClis.length === 1){...}
else{...}
```








## 四 参考文档

[01-]()
